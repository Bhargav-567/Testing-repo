{% extends 'base.html' %}
{% block content %}
<div class="max-w-3xl mx-auto p-6 bg-white rounded shadow-lg">
<h2 class="text-2xl font-semibold mb-4">üìä Your Results</h2>
<div id="results"></div>
</div>
<script>
const data = JSON.parse(sessionStorage.getItem('exam_results'));
console.log(data);
if (data) {
  const percentage = (data.score / data.total) * 100;
  document.getElementById('results').innerHTML = `
    <div class="mb-4 p-4 bg-green-100 rounded">
      <h3 class="text-xl font-bold">Score: ${data.score} / ${data.total}</h3>
      <p class="mt-2">Percentage: ${percentage.toFixed(2)}%</p>
    </div>
    <h4 class="font-semibold mb-2">Detailed Breakdown</h4>
    ${data.details.map((d,i) => `
      <div class="border p-3 mb-2 rounded ${d.correct ? 'bg-green-50' : 'bg-red-50'}">
        <h5 class="font-semibold mb-1">Q${i+1}: ${d.question}</h5>
        <p><strong>Your Answer:</strong> ${d.your_answer}</p>
        <p><strong>Correct Answer:</strong> ${d.correct_answer}</p>
        <p><strong>Status:</strong> ${d.correct ? '‚úÖ Correct' : '‚ùå Incorrect'}</p>
        <p><strong>Score:</strong> ${d.score}%</p>
      </div>
    `).join('')}
    <button onclick="location.href='/'" class="mt-4 bg-gray-300 px-4 py-2 rounded hover:bg-gray-400">Exit</button>
  `;
}
</script>
{% endblock %}
